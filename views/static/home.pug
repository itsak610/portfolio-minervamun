extends layout

block content
    style.
        .leftside{
            float:left;
            text-align:left;
            display: flex;
            flex-flow:row;
            margin-left:150px;
        }
        .s1 .leftside{
            color:#fff;
            margin-top:40vh;
        }
        .s2 .leftside{
            margin-top:17vh;
            color:#697881;
        }
        .s4 .leftside{
            margin-top:45vh;
            color:#fff;
        }
        .s4 .leftside h1{
            font-size:2.2em;
            margin-top:-30px;
            font-weight:400;
        }
        .s7{
            margin-top:10vh;
        }
        .leftside b{
            color:#000;
            font-weight:bolder;
        }
        h1.title, h2.title{
            font-weight:200;
        }
        h1.title{
            font-size:2em;
            margin:0;
            margin-bottom:20px;
        }
        h2.title{
            font-size:5em;
            margin:0;
            margin-top:-20px;
            padding-right:2vw;
        }
        h3.title{
            margin-top:8vh;
        }
        .title a{
            font-weight:400;
            font-size:1.4em;
            color:#000;
            background:#fff;
            text-decoration: none;
            padding:20px;
            padding-left:50px;
            padding-right:50px;
            border-radius:50px;
        }
        .title a:hover{
            color:#000;
            background:lightgrey;
        }
        .leftside p{
            font-size: 2vw;
            font-weight: 300;
            width:50%;
        }
        .leftside b{
            font-weight: 500;
        }

        .titlediv{
            display:flex;
            flex-flow:column;
            width:60vw;
        }

        .tempdiv1{
            display:flex;
            flex-flow:column;
            justify-content:space-evenly;
        }

        .tempdiv3 h4{
            font-size:2.7em;
            font-weight:500;
            width:87%;
            margin:1em auto;
            margin-top:3em;
            text-align:left;
        }

        .textdiv{
            display:flex;
            flex-flow:row;
            justify-content:space-evenly;
        }

        .textpart{
            width:25%;
        }

        .textpart h5{
            font-size:2em;
            font-weight:400;
            text-align:center
        }

        .textpart p{
            font-size:1.3em;
            text-align:center
        }

        .arrowcontainer{
            margin-left: 120px;
        }

        .tempdiv5{
            border: 1px black solid;
            border-radius: 30px;
            padding:30px;
        }

        .s5 h3{
            font-weight: 400;
            font-size: 2.3em;
            padding-top:8vh;
            padding-bottom:0.8vh;
        }

        .t1{
            font-size:1.2em;
        }

        .t2{
            font-size:1.2em;
            font-weight:bold;
        }

        .arrowsupercontainer{
            display:flex;
            flex-flow:row;
            justify-content:right;
            width:90%;
        }

        .nav-left, .nav-right{
            padding:10px;
            padding-left:30px;
            padding-right:30px;
            font-size:1em;
            border:1px solid black;
            border-radius:30px;
        }

        .nav-left{
            margin-right:40px;
        }

        .nav-left:hover, .nav-right:hover{
            color:white;
            background:black;
        }

        .s6 h6{
            font-size:2.2em;
            margin-left:7%;
        }

        .helpdiv h7{
            font-size:3.5em;
            color:#687780;
        }

        .helpdiv b{
            color:#000;
        }

        .helpdiv p{
            font-size:1em;
            margin-top: 50px;
        }

        .s6div{
            display:flex;
            flex-flow:row;
            justify-content:space-evenly;
        }

        .helpdiv{
            width:45%;
        }
        .helpimgdiv{
            width:35%;
        }
        .helpimgdiv img{
            width:100%;
            height: auto;
        }
        .contactbutton{
            display:flex;
            flex-flow:row;
            font-weight:bold;
            margin-top:40px;
            width:fit-content;
            cursor:pointer;
        }
        .cb1{
            border:1px black solid;
            border-radius:100px;
            padding:10px 15px;
        }
        .cb2{
            padding:10px;
        }
        .contactbutton:hover + .cb1{
            color:#fff;
            background:#000;
        }
        .h8container{
            font-size:1em;
            width:100%;
            font-weight:bolder;
            text-align:center;
        }
        .imgs{
            display:flex;
            justify-content:center;
            padding:40px;
        }
        .imgs1, .imgs3{
            width:fit-content;
            display:flex;
            flex-flow:row;
        }
        .imgs img{
            height:200px;
            width:200px;
            padding:10px;
        }
        @media (min-width:1000px) and (max-width:1300px) {
            h1.title{
                font-size:2.6vw;
            }
            h2.title{
                font-size:5vw;
            }
            .title a{
                font-size:1.3vw;
                padding:18px;
                padding-left:34px;
                padding-right:34px;
            }
            .leftside p{
                font-size:3vw;
            }
            .imgs{
                flex-flow:column;
                justify-content:center
            }
            .imgs1, .imgs3{
                width:100%;
                justify-content:center
            }
            .left3 img{
                margin-left:50px;
            }
            .desktop-nav ul li a {
                padding-left:0;
                padding-right:0;
            }
            .tempdiv3 h4{
                font-size:2.2em;
                margin-top:10vh;
            }
            .textpart h5{
                font-size:1.7em;
            }
            .textpart p{
                font-size:1.25em;
            }
            .helpdiv h7{
                font-size:2.5em;
            }


        }
        @media (min-width:750px) and (max-width:1000px) {
            h1.title{
                font-size:3vw;
            }
            h2.title{
                font-size:5.2vw;
                line-height:8vw;
            }
            .title a{
                font-size:1.7vw;
                padding:18px;
                padding-left:30px;
                padding-right:30px;
            }
            .leftside p{
                font-size:3.1vw;
            }
            section.s4{
                height:55vh;
            }
            .s4 .leftside{
                margin-top:32vh;
            }
            footer img{
                height: 42px !important;
            }
            .imgs{
                flex-flow:column;
                justify-content:center
            }
            .imgs1, .imgs3{
                width:100%;
                justify-content:center
            }
            .s4 .leftside h1{
                font-size:1.6em;
            }
            .left3 img{
                margin-left:50px;
            }
            .desktop-nav ul li a {
                padding-left:0;
                padding-right:0;
            }
            .tempdiv3 h4{
                font-size:1.8em;
                margin-top:15vh;
            }
            .textpart h5{
                font-size:1.4em;
            }
            .textpart p{
                font-size:1em;
            }
            .helpdiv h7{
                font-size:2em;
            }

        }
        @media (max-width:750px) {
            .carousel{
                width:65%;
            }
            .nav-left, .nav-right{

            }
            section.s2{
                height:max-content;
                padding-bottom:80px;
            }
            section.s4{
                height:50vh;
            }
            section.s6{
                height:max-content;
            }
            .pages li{
                padding:5px;
            }
            .arrowsupercontainer{
                justify-content:center;
                margin-left:-10px;
            }
            .s6div{
                flex-flow:column-reverse;
            }
            .helpdiv{
                width:70%;
                margin:0 auto;
                margin-top:80px;
            }
            .helpimgdiv{
                width:55%;
                margin:0 auto;
            }
            .s4 .leftside{
                margin-top:22vh;
            }
            .imgs img{
                height:100px;
                width:100px;
            }
            .leftside{
                margin-left:50px;
            }
            .leftside p{
                font-size:3vw;
                line-height:3.8vw;
            }

            .textdiv{
                flex-flow:column;
                justify-content:center;
            }
            .textpart{
                width:100%;
            }
            h1.title{
                font-size:4vw;
            }
            h2.title{
                font-size:7vw;
                margin-top:10px;
            }
            .title a{
                font-size:3vw;
                padding:18px;
                padding-left:30px;
                padding-right:30px;
            }
            .s5 h3{
                font-size:1.5em;
            }
            .imgs{
                flex-flow:column;
                justify-content:center
            }
            .imgs1, .imgs3{
                width:100%;
                justify-content:center
            }
            .s4 .leftside h1{
                font-size:1em;
                margin-top:0;
            }
            .arrowcontainer {
                margin-left: 50px;
            }
            .left3 img{
                margin-left:50px;
            }
            .desktop-nav ul li a {
                padding-left:0;
                padding-right:0;
            }
            .tempdiv3 h4{
                font-size:1.8em;
                margin-top:8vh;
            }
            .textpart h5{
                font-size:1.4em;
            }
            .textpart p{
                font-size:1em;
                line-height:1.4em;
                width:60%;
                margin:0 auto;
            }
            .helpdiv h7{
                font-size:2em;
            }
            .carousel{
                height:35vh;
            }
            .helpdiv p{
                line-height:1.3em;
            }
            .cb1{
                padding:10px;
            }
        }

    div
        section.s1
            .container
                .leftside
                    .titlediv
                        h1.title Welcome to Mobid!
                        h2.title New to GSU?
                        h2.title Find your way here.
                        h3.title
                            a(href='javascript:document.getElementsByClassName("stepcontainer")[0].scrollIntoView()') How it works
        section.s2
            .container
                .stepcontainer
                    .steps1
                        .steptext
                            h1.title Step 1
                            h2.title This is step 1.
                        .stepimg
                            img(src='/img/iphone.png')
                    .steps2
                        .steptext
                            h1.title Step 2
                            h2.title This is step 2.
                        .stepimg
                            img(src='/img/iphone.png')
                    .steps1
                        .steptext
                            h1.title Step 3
                            h2.title This is step 3.
                        .stepimg
                            img(src='/img/iphone.png')
                    .steps2
                        .steptext
                            h1.title Step 4
                            h2.title This is step 4.
                        .stepimg
                            img(src='/img/iphone.png')
                    .steps1
                        .steptext
                            h1.title Step 5
                            h2.title This is step 5.
                        .stepimg
                            img(src='/img/iphone.png')


    script.
        document.getElementById("homenav").classList.toggle("active");

        var carousel = document.querySelector('.carousel');
        var carouselContent = document.querySelector('.carousel-content');
        var slides = document.querySelectorAll('.slide');
        var arrayOfSlides = Array.prototype.slice.call(slides);
        var carouselDisplaying;
        var screenSize;
        setScreenSize();
        var lengthOfSlide;

        function addClone() {
        var lastSlide = carouselContent.lastElementChild.cloneNode(true);
        lastSlide.style.left = (-lengthOfSlide) + "px";
        carouselContent.insertBefore(lastSlide, carouselContent.firstChild);
        }
        // addClone();

        function removeClone() {
        var firstSlide = carouselContent.firstElementChild;
        firstSlide.parentNode.removeChild(firstSlide);
        }

        function moveSlidesRight() {
        var slides = document.querySelectorAll('.slide');
        var slidesArray = Array.prototype.slice.call(slides);
        var width = 0;

        slidesArray.forEach(function(el, i){
            el.style.left = width + "px";
            width += lengthOfSlide;
        });
        addClone();
        }
        moveSlidesRight();

        function moveSlidesLeft() {
        var slides = document.querySelectorAll('.slide');
        var slidesArray = Array.prototype.slice.call(slides);
        slidesArray = slidesArray.reverse();
        var maxWidth = (slidesArray.length - 1) * lengthOfSlide;

        slidesArray.forEach(function(el, i){
            maxWidth -= lengthOfSlide;
            el.style.left = maxWidth + "px";
        });
        }

        window.addEventListener('resize', setScreenSize);

        function setScreenSize() {
        if ( window.innerWidth >= 1200 ) {
            carouselDisplaying = 3;
        } else if ( window.innerWidth >= 750 ) {
            carouselDisplaying = 2;
        } else {
            carouselDisplaying = 1;
        }
        getScreenSize();
        }

        function getScreenSize() {
        var slides = document.querySelectorAll('.slide');
        var slidesArray = Array.prototype.slice.call(slides);
        lengthOfSlide = ( carousel.offsetWidth  / carouselDisplaying );
        var initialWidth = -lengthOfSlide;
        slidesArray.forEach(function(el) {
            el.style.width = lengthOfSlide + "px";
            el.style.left = initialWidth + "px";
            initialWidth += lengthOfSlide;
        });
        }


        var rightNav = document.querySelector('.nav-right');
        rightNav.addEventListener('click', moveLeft);

        var moving = true;
        function moveRight() {
        if ( moving ) {
            moving = false;
            var lastSlide = carouselContent.lastElementChild;
            lastSlide.parentNode.removeChild(lastSlide);
            carouselContent.insertBefore(lastSlide, carouselContent.firstChild);
            removeClone();
            var firstSlide = carouselContent.firstElementChild;
            firstSlide.addEventListener('transitionend', activateAgain);
            moveSlidesRight();
        }
        }

        function activateAgain() {
        var firstSlide = carouselContent.firstElementChild;
        moving = true;
        firstSlide.removeEventListener('transitionend', activateAgain);
        }

        var leftNav = document.querySelector('.nav-left');
        leftNav.addEventListener('click', moveRight);

        // var moveLeftAgain = true;

        function moveLeft() {
        if ( moving ) {
            moving = false;
            removeClone();
            var firstSlide = carouselContent.firstElementChild;
            firstSlide.addEventListener('transitionend', replaceToEnd);
            moveSlidesLeft();
        }
        }

        function replaceToEnd() {
        var firstSlide = carouselContent.firstElementChild;
        firstSlide.parentNode.removeChild(firstSlide);
        carouselContent.appendChild(firstSlide);
        firstSlide.style.left = ( (arrayOfSlides.length -1) * lengthOfSlide) + "px";
        addClone();
        moving = true;
        firstSlide.removeEventListener('transitionend', replaceToEnd);
        }




        carouselContent.addEventListener('mousedown', seeMovement);

        var initialX;
        var initialPos;
        function seeMovement(e) {
        initialX = e.clientX;
        getInitialPos();
        carouselContent.addEventListener('mousemove', slightMove);
        document.addEventListener('mouseup', moveBasedOnMouse);
        }

        function slightMove(e) {
        if ( moving ) {
            var movingX = e.clientX;
            var difference = initialX - movingX;
            if ( Math.abs(difference) < (lengthOfSlide/4) ) {
            slightMoveSlides(difference);
            }  
        }
        }

        function getInitialPos() {
        var slides = document.querySelectorAll('.slide');
        var slidesArray = Array.prototype.slice.call(slides);
        initialPos = [];
        slidesArray.forEach(function(el){
            var left = Math.floor( parseInt( el.style.left.slice(0, -2 ) ) ); 
            initialPos.push( left );
        });
        }

        function slightMoveSlides(newX) {
        var slides = document.querySelectorAll('.slide');
        var slidesArray = Array.prototype.slice.call(slides);
        slidesArray.forEach(function(el, i){
            var oldLeft = initialPos[i];
            el.style.left = (oldLeft + newX) + "px";
        });
        }

        function moveBasedOnMouse(e) { 
        var finalX = e.clientX;
        if ( initialX - finalX > 0) {
            moveRight();
        } else if ( initialX - finalX < 0 ) {
            moveLeft();
        }
        document.removeEventListener('mouseup', moveBasedOnMouse);
        carouselContent.removeEventListener('mousemove', slightMove);
        }
        $(function() {
            $('.contactbutton').hover(function() {
                $('.cb1').css('background-color', 'black');
                $('.cb1').css('color', 'white');
            }, function() {
                $('.cb1').css('background-color', 'white');
                $('.cb1').css('color', 'black');
            });
        });
    include footer
    script.
        navigator.geolocation.getCurrentPosition(
            // Success function
            showPosition, 
            // Error function
            null, 
            // Options. See MDN for details.
            {
            enableHighAccuracy: true,
            timeout: 5000,
            maximumAge: 0
            });

        function showPosition(position) {
            console.log(position.coords.latitude)
            $.ajax({
            type: "POST",
            url: "/postcords",
            data : {'latitude':position.coords.latitude, 'longitude':position.coords.longitude},
            statusCode: {
                404: function () { console.log("Page not found"); },
                500: function () { console.log("internal server error"); }
            },
            success: function (data) {
                console.log(data); 
            } });
        }
